{# -*- coding: utf-8 -*-

  Copyright (C) 2021 Graz University of Technology.

  Invenio-Records-Marc21 is free software; you can redistribute it and/or modify it
  under the terms of the MIT License; see LICENSE file for more details.
#}

{% macro show_sanitized_detail(title, value) %}
<div class="ui relaxed grid">
  <div class="two column row">
    <div class="four wide column">
      <p><b>{{ title | sanitize_html()| safe}}</b></p>
    </div>
    <div class="twelve wide column">
      {{ value | sanitize_html()| safe }}
    </div>
  </div>
</div>
{%- endmacro %}



{% macro show_detail(title, value, type="str") %}
<div class="ui relaxed grid">
  <div class="two column row">
    <div class="four wide column">
      <p><b>{{ _(title) }}</b></p>
    </div>
    <div class="twelve wide column">
      {% if value is iterable and (value is not string and value is not mapping) %}
        {%- set value = value|join(', ') %}
      {% elif type == "link" %}
        <a href={{value}}>{{ value }}</a>
      {%else %}
        {{ value }}
      {% endif %}
    </div>
  </div>
</div>
{%- endmacro %}

{% macro show_subtitles(titles) %}
  {% for key, value in titles.items() %}
    {% if key != "title" and key != "nonfiling_characters" %}
      {% if key == "statement_of_responsibility" %}
        {% set key = _("Responsible") %}
      {% elif key == "title_added_entry"%}
        {% set key = _("Added Title") %}
      {% elif key == "title_added_entry"%}
        {% set key = _("Added Title") %}
      {% elif key == "remainder_of_title"%}
        {% set key = _("Subtitle") %}
      {% endif %}
    {{ show_detail(key, value) }}
    {% endif %}
  {% endfor %}
{%- endmacro %}



{% macro show_publisher(publishers) %}
  {% for key, value in publishers.items() %}
    {% if key == "sequence_of_statements" %}
      {% set key = _("Sequence") %}
    {% elif key == "name_of_producer_publisher_distributor_manufacturer"%}
      {% set key = _("Publisher") %}
    {% elif key == "place_of_production_publication_distribution_manufacture"%}
      {% set key = _("Place of publication") %}
    {% elif key == "date_of_production_publication_distribution_manufacture_or_copyright_notice"%}
      {% set key = _("Publication Date") %}
    {% elif key == "function_of_entity"%}
      {% set key = _("Function") %}     
    {% endif %}
    {{ show_detail(key, value) }}
  {% endfor %}
{%- endmacro %}


{% macro show_dissertation(dissertation) %}
  {% for key, value in dissertation.items() %}
    {% if key == "degree_type" %}
      {% set key = "Dissertation Type" %}
    {% elif key == "name_of_granting_institution"%}
      {% set key = "Institution" %}
    {% elif key == "year_degree_granted"%}
      {% set key = "Year of degree" %}
    {% endif %}
    {{ show_detail(key, value) }}
  {% endfor %}
{%- endmacro %}



{% macro show_location_and_access(location_and_access) %}
  {% for key, value in location_and_access.items() %}
    {%set type = "str" %}
    {% if key == "uniform_resource_identifier" %}
      {% set key = _("Link") %}
      {% set type = "link" %}
    {% elif key == "nonpublic_note"%}
      {% set key = _("Note") %}
    {% elif key == "materials_specified"%}
      {% set key = _("Materials") %}
    {% elif key == "access_method"%}
      {% set key = _("Access Method") %}
    {% endif %}
    {{ show_detail(key, value, type) }}
  {% endfor %}
{%- endmacro %}


{% macro show_index_term_genre(index_term_genre) %}
  {% for key, value in index_term_genre.items() %}
    {% if key == "authority_record_control_number" %}
      {% set key = _("Control number") %}
    {% elif key == "genre_form_data_or_focus_term"%}
      {% set key = _("Type") %}
    {% elif key == "type_of_heading"%}
      {% set key = _("Heading") %}
    {% elif key == "source_of_term"%}
      {% set key = _("Source") %}
    {% endif %}
    {{ show_detail(key, value) }}
  {% endfor %}
{%- endmacro %}



{% macro show_pages(pages) %}
  {% for key, value in publishers.items() %}
    {% if key == "sequence_of_statements" %}
      {% set key = _("Sequence") %}
    {% elif key == "name_of_producer_publisher_distributor_manufacturer"%}
      {% set key = _("Publisher") %}
    {% elif key == "place_of_production_publication_distribution_manufacture"%}
      {% set key = _("Place of publication") %}
    {% endif %}
    {{ show_detail(key, value) }}
  {% endfor %}
{%- endmacro %}