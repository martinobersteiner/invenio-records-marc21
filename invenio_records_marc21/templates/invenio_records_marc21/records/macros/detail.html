{# -*- coding: utf-8 -*-

  Copyright (C) 2021 Graz University of Technology.

  Invenio-Records-Marc21 is free software; you can redistribute it and/or modify it
  under the terms of the MIT License; see LICENSE file for more details.
#}

{% macro show_sanitized_detail(title, value) %}
<div class="ui relaxed grid">
  <div class="two column row">
    <div class="four wide column">
      <p><b>{{ title | sanitize_html()| safe}}</b></p>
    </div>
    <div class="twelve wide column">
      {{ value | sanitize_html()| safe }}
    </div>
  </div>
</div>
{%- endmacro %}



{% macro show_detail(title, value, type="str") %}
<div class="ui relaxed grid">
  <div class="two column row">
    <div class="four wide column">
      <p><b>{{ _(title) }}</b></p>
    </div>
    <div class="twelve wide column">
      {% if value is iterable and (value is not string and value is not mapping) %}
        {%- set value = value|join(', ') %}
      {% elif type == "link" %}
        <a href={{value}}>{{ value }}</a>
      {%else %}
        {{ value }}
      {% endif %}
    </div>
  </div>
</div>
{%- endmacro %}


{% macro show_personal_name(titles) %}
  {% for key, value in titles.items() %}
    {% if key != "type_of_personal_name_entry_element" and key != "relator_code" %}
      {% if key == "personal_name" %}
        {% set key = _("Name") %}
        {% set value = titles | personal_name %}
      {% endif %}
    {{ show_detail(key, value) }}
    {% endif %}
  {% endfor %}
{%- endmacro %}



{% macro show_publisher(publishers) %}
  {% for key, value in publishers.items() %}
    {% if key != "sequence_of_statements" %}
      {% if key == "name_of_producer_publisher_distributor_manufacturer"%}
        {% set key = _("Publisher") %}
      {% elif key == "place_of_production_publication_distribution_manufacture"%}
        {% set key = _("Place of publication") %}
      {% elif key == "date_of_production_publication_distribution_manufacture_or_copyright_notice"%}
        {% set key = _("Publication Date") %}
      {% elif key == "function_of_entity"%}
        {% set key = _("Function") %}     
      {% endif %}
      {{ show_detail(key, value) }}
    {% endif %}
  {% endfor %}
{%- endmacro %}


{% macro show_dissertation(dissertation) %}
  {% for key, value in dissertation.items() %}
    {% if key == "degree_type" %}
      {% set key = _("Dissertation Type") %}
    {% elif key == "name_of_granting_institution"%}
      {% set key = _("Institution") %}
    {% elif key == "year_degree_granted"%}
      {% set key = _("Year of degree") %}
    {% endif %}
    {{ show_detail(key, value) }}
  {% endfor %}
{%- endmacro %}



{% macro show_location_and_access(location_and_access) %}
  {% for key, value in location_and_access.items() %}
    {% if key != "access_method" %}
      {%set type = "str" %}
      {% if key == "uniform_resource_identifier" %}
        {% set key = _("Link") %}
        {% set type = "link" %}
      {% elif key == "nonpublic_note"%}
        {% set key = _("Note") %}
      {% elif key == "materials_specified"%}
        {% set key = _("Materials") %}
      {% endif %}
      {{ show_detail(key, value, type) }}
    {% endif %}
  {% endfor %}
{%- endmacro %}


{% macro show_index_term_genre(index_term_genre) %}
  {% for key, value in index_term_genre.items() %}
    {% if key != "source_of_term" and  key != "type_of_heading" %}
      {% if key == "authority_record_control_number" %}
        {% set key = _("Control number") %}
      {% elif key == "genre_form_data_or_focus_term"%}
        {% set key = _("Type") %}
      {% endif %}
      {{ show_detail(key, value) }}
    {% endif %}
  {% endfor %}
{%- endmacro %}



{% macro show_pages(pages) %}
  {% for key, value in publishers.items() %}
    {% if key == "sequence_of_statements" %}
      {% set key = _("Sequence") %}
    {% elif key == "name_of_producer_publisher_distributor_manufacturer"%}
      {% set key = _("Publisher") %}
    {% elif key == "place_of_production_publication_distribution_manufacture"%}
      {% set key = _("Place of publication") %}
    {% endif %}
    {{ show_detail(key, value) }}
  {% endfor %}
{%- endmacro %}